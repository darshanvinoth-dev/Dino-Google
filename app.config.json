{
  "version": "1.0.0",
  "app_name": "Dino Database",
  "ui": {
    "tabs": [
      { "id": "deep-dive", "label": "Deep Dive", "icon": "search" },
      { "id": "todays-dino", "label": "Today's Dino", "icon": "calendar" },
      { "id": "games", "label": "Games", "icon": "gamepad" }
    ],
    "theme": {
      "mode": "dark",
      "primary": "#7ad1ff",
      "bg": "#0b0f14",
      "card": "#121821",
      "text": "#e7eef7",
      "muted": "#9fb0c3"
    },
    "layout": {
      "use_bootstrap": true,
      "mobile_breakpoint_px": 768,
      "card_style": "elevated",
      "image_lazy_loading": true
    }
  },

  "data_sources": {
    "species_sources": [
      { "file": "dino_data.json", "type": "local-json", "required": false },
      { "file": "tyrannosauridae.json", "type": "local-json", "required": false }
    ],
    "min_species_required": 96,
    "fields_expected": [
      "name", "genus", "family", "subfamily", "time", "formation",
      "locality", "length", "length_m", "mass", "mass_kg",
      "diet", "type", "specimens", "facts"
    ],
    "wikipedia": {
      "enable_extract": true,
      "intro_only": true,
      "max_chars": 1200,
      "language": "en",
      "image_policy": {
        "allow_cc_by_sa": true,
        "prefer_thumb_width_px": 480,
        "block_specimen_names": ["Scotty"]  // name only, no image
      }
    }
  },

  "deep_dive": {
    "search_bar_placeholder": "Search a genus (e.g., Tyrannosaurus)…",
    "search_scope": "genus", 
    "filters": {
      "era": true,
      "diet": true,
      "size_ranges_m": [
        { "id": "s", "label": "Small (<2 m)", "min": 0, "max": 2 },
        { "id": "m", "label": "Medium (2–8 m)", "min": 2, "max": 8 },
        { "id": "l", "label": "Large (8–15 m)", "min": 8, "max": 15 },
        { "id": "xl", "label": "Giant (15+ m)", "min": 15, "max": 999 }
      ]
    },
    "autocomplete": {
      "enabled": true,
      "min_chars": 1,
      "limit": 8,
      "source": "all_species_names"
    },
    "results": {
      "show_quick_facts": true,
      "show_specimens": true,
      "show_images": true,
      "show_wikipedia_extract": true,
      "show_locality_map": false
    },
    "sorting": [
      { "id": "name_az", "label": "Name (A→Z)", "field": "name", "dir": "asc" },
      { "id": "era", "label": "Era", "field": "time", "dir": "asc" }
    ]
  },

  "todays_dino": {
    "reset_time_utc": "00:00:00Z",
    "storage_keys": {
      "last_pick_date": "dd_last_pick_utc",
      "last_pick_slug": "dd_last_pick_slug"
    },
    "randomness": {
      "strategy": "crypto",
      "avoid_recent_repeats_days": 30
    },
    "countdown": {
      "enable": true,
      "format": "hh:mm:ss",
      "target": "next_utc_midnight"
    },
    "display": {
      "show_full_profile": true,
      "include_images": true,
      "include_specimens": true,
      "include_facts": true,
      "include_wikipedia_extract": true,
      "show_share_buttons": true
    }
  },

  "games": {
    "lazy_load": true,
    "min_games": 5,
    "modules": [
      {
        "id": "guess-the-dino",
        "label": "Guess the Dinosaur",
        "chunk": "games/guess-the-dino.js",
        "rules": "Show silhouette or facts; player guesses name.",
        "uses_species_data": true
      },
      {
        "id": "era-matcher",
        "label": "Match the Era",
        "chunk": "games/era-matcher.js",
        "rules": "Drag-and-drop dinos into their eras."
      },
      {
        "id": "speed-quiz",
        "label": "Speed Quiz",
        "chunk": "games/speed-quiz.js",
        "rules": "Timed multiple-choice questions from facts."
      },
      {
        "id": "size-sort",
        "label": "Size Sort",
        "chunk": "games/size-sort.js",
        "rules": "Sort dinos by average length/mass."
      },
      {
        "id": "where-found",
        "label": "Where Were They Found?",
        "chunk": "games/where-found.js",
        "rules": "Pick the correct country/formation."
      }
    ],
    "scoring": {
      "use_local_storage": true,
      "leaderboard_key": "dd_game_scores"
    }
  },

  "performance": {
    "cache": {
      "enable_runtime_cache": true,
      "max_entries": 10,
      "ttl_minutes": 60
    },
    "images": {
      "lazy_loading": true,
      "observer_root_margin": "200px"
    },
    "modules": {
      "defer_noncritical": true,
      "preloads": [
        { "rel": "preload", "href": "dino_data.json", "as": "fetch" }
      ]
    }
  },

  "analytics": {
    "enabled": true,
    "provider": "custom",
    "events": [
      "search_submitted",
      "autocomplete_selected",
      "filter_applied",
      "sort_changed",
      "todays_dino_viewed",
      "game_started",
      "game_finished"
    ],
    "storage_key": "dd_analytics_buffer",
    "flush_interval_sec": 30
  },

  "routing": {
    "strategy": "hash",
    "routes": [
      { "path": "#/deep-dive", "tab": "deep-dive" },
      { "path": "#/today", "tab": "todays-dino" },
      { "path": "#/games", "tab": "games" }
    ],
    "default_route": "#/deep-dive"
  },

  "extras": {
    "related_algorithm": {
      "max_related": 6,
      "by_family_weight": 0.6,
      "by_era_overlap_weight": 0.3,
      "by_region_weight": 0.1
    },
    "favorites": {
      "enabled": true,
      "storage_key": "dd_favorites"
    }
  },

  "developer_notes": {
    "_how_to_use": [
      "Fetch this file at app start (e.g., fetch('app.config.json')).",
      "Render the three tabs based on ui.tabs.",
      "For Deep Dive, index species by genus and wire the search.",
      "For Today's Dino, at first render check localStorage last pick; if date != today(UTC), draw a new random index with crypto.getRandomValues, store slug and today.",
      "Games: load module chunk only when the Games tab is opened (lazy)."
    ],
    "_slug_rule": "Create slug as lowercased name with non-alphanumerics replaced by '-' (e.g., 'Tyrannosaurus rex' -> 'tyrannosaurus-rex').",
    "_sample_species_min": "Ensure total species available across sources >= 96 before enabling full Deep Dive/Wiki scraping."
  }
}
